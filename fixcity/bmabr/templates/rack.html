{% extends "base.html" %} 
{% load thumbnail %}

{% block title %} fixcity - overview page  {% endblock %} 

{% block extra_header %} 
<script src="/site_media/openlayers/OpenLayers.js"></script>
<script type="text/javascript" src="/site_media/openlayers/OpenLayers.js"></script>
<script type="text/javascript">
  // Settings needed by rackmap.js.
  var pointRadius = "10";
  var externalGraphic = "/site_media/img/rack.png";
  var WKT = "{{ rack.location.wkt }}";
  function post_loadmap(map, geom) {
    map.setCenter(geom.getBounds().getCenterLonLat(), 16);
  };
</script>
<script type="text/javascript" src="/site_media/js/rackmap.js"></script>

{% endblock %}

{% block menu %} 
{% endblock %} 

{% block lede %}
<h1>View Rack</h1> <a href="/rack/new">Suggest a new Rack</a>
{% endblock %}

{% block content %}
<div id="rackinfo">
  <dl>
    <dt>Street Address</dt>
    <dd>{{rack.address}}</dd>
    <dt>Establishment</dt>
    <dd>{{rack.title}}</dd>
    <dt>Description</dt>
    <dd>{{rack.description}}</dd>
    <dt>Photo</dt>
    <dd>
    {% if rack.photo %}
    <img src="{{rack.photo.extra_thumbnails.large}}" />
    {% else %}
      <div class="error error-photo">
        <h2> No photos about this request </h2>
      </div>
   {% endif %}
    </dd>
  </dl>
  <ul id="support-statements">
  {% for object in statement_query %}
    <li><a href="{{object.file.url}}">Statement of support</a></li>
  {% endfor %}
  </ul>
    
  {% if user.is_authenticated %}
  <a class="fakebigbutton" href="/admin/bmabr/rack/{{rack.id}}/edit">Edit this Rack</a>
  {% else %}
  <a class="fakebigbutton" href="/accounts/login">Log in to Edit</a>
  {% endif %}
  </div><!-- /#rackinfo -->
    
<div class="suggest">
	<div id="request-map">
	  <div id="map-legend" class="pngfix"></div>
	</div>
	<div id="quick-check">
	  <p>Suggestions must have a photo matching the <a class="photo-guidelines" href="#">guidelines</a> and meeting <a class="location-guidelines" href="#">placement requirements</a> to be verified. Support statements are optional for non-residential buildings.</p>
  </div><!-- /#quick-check -->
</div><!-- /#suggest -->

{% endblock %} 


{% block extra_footer %}
<script type="text/javascript">
//<![CDATA[
  jQuery(document).ready(function($) {
    $('.photo-guidelines').click(function() {Boxy.ask("<p class=\"content\">Photographs should show an unobstructed view of the suggested spot, curb, and storefront. Please copy these examples closely in terms of angle, zoom, and detail.</p><div class=\"selfclear\"><div class=\"leftwise\"<h2>Ideal</h2><img src=\"/site_media/img/rackphoto-ideal.jpg\" width=\"300\" height=\"201\" /></div><div class=\"rightwise\"><h2>Good</h2><img src=\"/site_media/img/rackphoto-good.jpg\" width=\"300\" height=\"201\"  /></div></div>", null, null, {title: "Photo Guidelines", closeable: true, contentClass: 'photos'});return false;});
    $('.location-guidelines').click(function() {Boxy.ask("<div class=\"content selfclear\"><a class=\"rightwise\" href=\"/site_media/resources/PlacementGuide.pdf\"><img src=\"/site_media/img/rack_diagram-thumb.png\" width=\"160\" height=\"200\" /></a><p>Your location suggestion should comply with the requirements shown in this diagram. <a href=\"/site_media/resources/PlacementGuide.pdf\">Print</a> and take out with you to verify this location, or watch the <a href=\"http://www.streetfilms.org/archives/how-to-get-your-nyc-bike-racks/\">Rack Placement Streetfilm</a> to better inform your suggestions.</p></div>", null, null, {title: "Location Guidelines", closeable: true});return false;});
  });
//]]>
</script>
{% endblock %}
